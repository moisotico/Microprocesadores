; Moises Campos Zepeda
; 06-06-2020
; IE0623: Microprocesadores
; Ejercicio 4: toggle LED por interrupci√≥n IRQ


#include registers.inc

; *****************************************************************************
;                       Interruption Vector Relocation
; *****************************************************************************

            org     $FFF2
            dw      IRQ_ISR

; *****************************************************************************
;                               HW Config
; *****************************************************************************
            org     $2000
            bset    DDRB, $01
            bset    DDRJ, $02
            bclr    PTJ, $02

            movb    #$C0, IRQCR

; *****************************************************************************
;                               Main Program
; *****************************************************************************
            lds     $4000
            cli
            bra     *
    
; *****************************************************************************
;                               IRQ_ISR Subroutine
; *****************************************************************************
IRQ_ISR     ldaa    PORTB
            eora    #$01
            staa    PORTB
            rti


