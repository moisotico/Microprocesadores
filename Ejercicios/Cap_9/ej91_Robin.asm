#include registers.inc

;*******************************************************************************
;       UNIVERSIDAD DE COSTA RICA       ESCUELA DE INGENIERIA ELECTRICA
;               MICROPROCESADORES IE 623  I SEMESTRE 2020
;*******************************************************************************
;                                       Led Toggle
;*******************************************************************************
;       V1
;       AUTOR: ROBIN GONZALEZ   B43011
;
;       DESCRIPCION:    PROBAR EL SIMULADOR NO EL DEBUG12
;
;
;*******************************************************************************

;                             Relocalizar vectores
;*******************************************************************************
 org            $FFF2
;  org            $3E72         DEBUG12
                dw IRQ_ISR

;*******************************************************************************

;                             Config de hardware
;*******************************************************************************


                ORG     $2000

;       BSET DDRB,$01;ESTO ES UNA MASCARA
        BSET DDRb,$01
        BSET DDRj,$02
        BCLR ptj,$02
        MOVB #$C0, irqcr
        
;*******************************************************************************
;                             PROGRAMA PRINCIPAL
;*******************************************************************************

        LDS $4000              ; EN SIMULADOR
;        LDS $3BFF       ; EN DEBUG 12
        CLI
        
        BRA *
        
;*******************************************************************************
;                             SUbrutina IRQ_ISR
;*******************************************************************************

IRQ_ISR         LDAA PORTB
                EORA #$01
                STAA PORTB
                RTI     ;retorno de interrupcion